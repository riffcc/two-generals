% Two Generals Protocol: A Deterministically Failsafe Solution
% to the Coordinated Attack Problem
%
% Target venues: PODC 2026, DISC 2026
% Note: Convert to LIPIcs format before submission

\documentclass[11pt,a4paper]{article}

% Standard packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning,shapes,calc,decorations.pathmorphing}
\usepackage{booktabs}
\usepackage{pgfplots}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage[margin=1in]{geometry}
\pgfplotsset{compat=1.17}

% Theorem environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}

% Custom commands for protocol notation
\newcommand{\Com}[1]{C_{#1}}
\newcommand{\Double}[1]{D_{#1}}
\newcommand{\Triple}[1]{T_{#1}}
\newcommand{\Quad}[1]{Q_{#1}}
\newcommand{\Sign}[2]{\mathsf{Sign}_{#1}(#2)}
\newcommand{\Verify}[3]{\mathsf{Verify}_{#1}(#2, #3)}
\newcommand{\Know}[2]{K_{#1}(#2)}
\newcommand{\Attack}{\mathsf{ATTACK}}
\newcommand{\Abort}{\mathsf{ABORT}}

% Algorithm Upon command
\algnewcommand\Upon{\textbf{upon}}
\algnewcommand\EndUpon{\textbf{end upon}}

% Bibliography
\bibliographystyle{plain}

% Document metadata
\title{Two Generals Protocol:\\ A Deterministically Failsafe Solution to the Coordinated Attack Problem}
\author{Anonymous}
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
The Two Generals Problem (Gray, 1978) established that coordinated action over unreliable channels is impossible via finite acknowledgment sequences---any message could be ``the last'' that fails. The Halpern-Moses impossibility result (1990) formalized this as the unachievability of common knowledge in asynchronous systems. We prove both results admit a resolution through \emph{bilateral cryptographic construction}: a three-phase, six-packet protocol ($C_A, C_B \to D_A, D_B \to T_A, T_B$) where the \emph{attack key}---an emergent tripartite construction---can only exist if both parties can compute it. The key insight: Gray's impossibility proof assumes closure under message removal (removing a delivered message yields another valid execution), but fair-lossy channels violate this assumption.

\textbf{Core claim:} $\forall$ adversary behavior: outcome $\in \{\text{CoordinatedAttack}, \text{CoordinatedAbort}\}$. Never asymmetric. Gray said symmetric outcomes are impossible; we prove they are guaranteed.

Our contributions: (1) A deterministic coordination protocol achieving symmetric outcomes (both ATTACK or both ABORT, never asymmetric) under \emph{all} adversary conditions---including total channel failure (NoChannel). (2) Formal proofs in Lean 4: \textbf{186+ theorems with zero \texttt{sorry} statements}, including exhaustive 256-case bilateral determination, Gray's closure failure via concrete witness, and trust boundary verification via \texttt{\#print axioms}. (3) Extension to Byzantine fault tolerance for $n = 3f + 1$ nodes, achieving consensus in two flooding rounds without view-change or $O(n^2)$ message complexity. (4) Empirical validation: 10,500 test runs across 0--98\% packet loss with zero asymmetric outcomes. (5) \textbf{7$\times$ latency improvement over TCP even under ideal conditions}. (6) \textbf{Lightweight TGP: an 8-bit safety primitive} for pre-authenticated channels. Reference implementations in Python and Rust are provided under AGPLv3.
\end{abstract}

%==============================================================================
\section{Introduction}
\label{sec:intro}
%==============================================================================

\input{chapters/01-introduction}

%==============================================================================
\section{System Model and Definitions}
\label{sec:model}
%==============================================================================

\input{chapters/02-model}

%==============================================================================
\section{The Two Generals Protocol}
\label{sec:protocol}
%==============================================================================

\input{chapters/03-protocol}

%==============================================================================
\section{The Bilateral Construction Property}
\label{sec:bilateral}
%==============================================================================

\input{chapters/04-bilateral}

%==============================================================================
\section{The Epistemic Fixpoint: Formal Treatment}
\label{sec:epistemic}
%==============================================================================

\input{chapters/05-epistemic}

%==============================================================================
\section{The Attack Key as Emergent State}
\label{sec:emergence}
%==============================================================================

\input{chapters/06-fullsolve}

%==============================================================================
\section{Formal Proofs}
\label{sec:proofs}
%==============================================================================

\input{chapters/07-proofs}

%==============================================================================
\section{The Protocol of Theseus}
\label{sec:theseus}
%==============================================================================

\input{chapters/08-theseus}

%==============================================================================
\section{Byzantine Fault Tolerance Extension}
\label{sec:bft}
%==============================================================================

\input{chapters/09-bft}

%==============================================================================
\section{Why TGP Is Faster Than TCP}
\label{sec:latency}
%==============================================================================

\input{chapters/10-latency}

%==============================================================================
\section{Performance Evaluation}
\label{sec:evaluation}
%==============================================================================

\input{chapters/11-evaluation}

%==============================================================================
\section{Safety-Critical Applications: Lightweight TGP}
\label{sec:safety-critical}
%==============================================================================

\input{chapters/12-safety-critical}

%==============================================================================
\section{Related Work}
\label{sec:related}
%==============================================================================

\input{chapters/13-related}

%==============================================================================
\section{Conclusion}
\label{sec:conclusion}
%==============================================================================

\input{chapters/14-conclusion}

%==============================================================================
\appendix
\section{Building and Benchmarking}
\label{sec:appendix-build}
%==============================================================================

\input{chapters/15-appendix-build}

%==============================================================================
\bibliography{references}
%==============================================================================

\end{document}
